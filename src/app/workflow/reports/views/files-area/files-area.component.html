<div class="card content-speed">
  <div class="card-header d-flex justify-content-between">
    <div class="header-title">
      <h4 class="card-title">Expedientes por Area</h4>
    </div>
  </div>
  <div class="card-body" [formGroup]="requestForm">
    <div class="accordion mb-3" id="accordionExample">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseOne"
            aria-expanded="false"
            aria-controls="collapseOne"
          >
            Panel de Búsqueda
          </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <div class="row">
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Área Creación:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="areasCreacion"
                      [valueKey]="'id'"
                      formControlName="areaCreadora"
                      [valueLabel]="'nombre'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Usuario:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="usuarios"
                      [valueKey]="'id'"
                      formControlName="idUsuario"
                      [valueLabel]="'usuario'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Número Expediente:</div>
                  <div class="content-control px-0">
                    <input type="text" class="form-control" formControlName="numeroExpediente" />
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Sede Origen:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="sedesOrigen"
                      [valueKey]="'id'"
                      formControlName="sedeOrigen"
                      [valueLabel]="'nombre'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Fecha Inicio:</div>
                  <div class="content-control px-0">
                    <input type="date" class="form-control" formControlName="fechaInicio" />
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Usuario Actual:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="usuariosActual"
                      [valueKey]="'id'"
                      formControlName="idUsuarioFinal"
                      [valueLabel]="'usuario'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Área Destino:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="areasDestino"
                      [valueKey]="'id'"
                      formControlName="areaDestino"
                      [valueLabel]="'nombre'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Proceso:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="procesos"
                      [valueKey]="'id'"
                      formControlName="idProceso"
                      [valueLabel]="'nombre'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Estado Expediente:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="estados"
                      [valueKey]="'id'"
                      formControlName="estado"
                      [valueLabel]="'nombre'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Sede Destino:</div>
                  <div class="content-control px-0">
                    <hdc-select
                      class="w-100"
                      [items]="sedesDestino"
                      [valueKey]="'id'"
                      formControlName="sedeDestino"
                      [valueLabel]="'nombre'"
                      [lock]="false"
                      customReactiveForm
                    ></hdc-select>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 135px">Fecha Fin:</div>
                  <div class="content-control px-0">
                    <input type="date" class="form-control" formControlName="fechaFin" />
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xxl-4">
                <div class="row content-form-control">
                  <div class="text-xs ps-0 label-custom" style="width: 155px">Fecha Última Derivación:</div>
                  <div class="content-control px-0">
                    <input type="date" class="form-control" formControlName="fechaUltDerivacion" />
                  </div>
                </div>
              </div>
            </div>
            <div class="text-end">
              <button type="button" class="mx-1 btn btn-primary btn-sm" style="height: 38px" (click)="openPrintModal()">
                <i class="fa-solid fa-print"></i> Imprimir
              </button>
              <button type="button" class="mx-1 btn btn-primary btn-sm" style="height: 38px" (click)="cleanForm()">
                <i class="fa-solid fa-trash-can"></i> Limpiar
              </button>
              <button type="button" class="ms-1 btn btn-primary btn-sm" style="height: 38px" (click)="submit()">
                <i class="fa-solid fa-magnifying-glass"></i> Buscar
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="contenedor">
        <div class="row">
          <div class="col-12 col-md-6"></div>
          <div class="col-12 col-md-6"></div>
        </div>
      </div>
    </div>
    <div *ngIf="data.length > 0">
      <p-table
        #pt
        [value]="data"
        [paginator]="true"
        [rows]="10"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} registros"
        [rowsPerPageOptions]="[10, 15, 25]"
        [tableStyle]="{ 'min-width': '50rem' }"
        styleClass="p-datatable-gridlines p-datatable-striped p-datatable-sm datatable-speed"
        [globalFilterFields]="[
          'numero',
          'titulo',
          'usuario',
          'fechaCreacion',
          'cliente',
          'razonSocial',
          'proceso',
          'areaCreadora',
          'areaDestino',
          'sedeOrigen',
          'sedeDestino',
          'fechaUltimaTraza'
        ]"
        [scrollable]="true"
        scrollHeight="flex"
      >
        <ng-template pTemplate="caption">
          <div class="d-flex justify-content-end align-items-center">
            <div class="p-input-icon-left table-input-search">
              <i class="pi pi-search"></i>
              <input type="text" pInputText placeholder="Buscar" (input)="filterRows($event)" />
            </div>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="numero" style="text-align: center">Número</th>
            <th pSortableColumn="titulo">Título<p-sortIcon field="titulo"></p-sortIcon></th>
            <th pSortableColumn="usuario">Usuario<p-sortIcon field="usuario"></p-sortIcon></th>
            <th pSortableColumn="fechaCreacion">Fecha de Creación<p-sortIcon field="fechaCreacion"></p-sortIcon></th>
            <th pSortableColumn="cliente">Cliente<p-sortIcon field="cliente"></p-sortIcon></th>
            <th pSortableColumn="razonSocial">Razón social<p-sortIcon field="razonSocial"></p-sortIcon></th>
            <th pSortableColumn="proceso">Proceso<p-sortIcon field="proceso"></p-sortIcon></th>
            <th pSortableColumn="areaCreadora">Área Creadora <p-sortIcon field="areaCreadora"></p-sortIcon></th>
            <th pSortableColumn="areaDestino">Área Destino<p-sortIcon field="areaDestino"></p-sortIcon></th>
            <th pSortableColumn="sedeOrigen">Sede Origen<p-sortIcon field="sedeOrigen"></p-sortIcon></th>
            <th pSortableColumn="sedeDestino">Sede Destino<p-sortIcon field="sedeDestino"></p-sortIcon></th>
            <th pSortableColumn="fechaUltimaTraza">Fecha Última Traza<p-sortIcon field="fechaUltimaTraza"></p-sortIcon></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
          <tr>
            <td style="text-align: center">{{ item.numero }}</td>
            <td>{{ item.titulo }}</td>
            <td>{{ item.usuario }}</td>
            <td>{{ item.fechaCreacion | date: 'dd/MM/yyyy' }}</td>
            <td>{{ item.cliente }}</td>
            <td>{{ item.razonSocial }}</td>
            <td>{{ item.proceso }}</td>
            <td>{{ item.areaCreadora }}</td>
            <td>{{ item.areaDestino }}</td>
            <td>{{ item.sedeOrigen }}</td>
            <td>{{ item.sedeDestino }}</td>
            <td>{{ item.fechaCreacion | date: 'dd/MM/yyyy' }}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
