{"version":3,"names":["hdcMultiselectCss","HdcMultiselect","this","maxHeight","componentWillUpdate","value","valueOptions","onChangeValueFilterOptions","event","searchText","filteredItems","_b","_a","items","filter","option","label","valueLabel","toLowerCase","includes","requestAnimationFrame","list","el","querySelectorAll","forEach","item","checkbox","flag","map","String","valueKey","checked","onClickSelectOption","indexOf","findIndex","push","splice","length","isSelectAll","_c","changeValue","emit","handleOnClick","ev","showDrop","contains","target","render","h","class","disabled","disable","lock","onClick","toggleDrop","getValueText","getClassInputAutocompleteContainer","onInput","onInputText","getClassInputAutocomplete","style","getMaxHeight","type","selectAllOptions","index","key","input","element","join","viewItems","show"],"sources":["src/components/atoms/hdc-multiselect/hdc-multiselect.scss?tag=hdc-multiselect","src/components/atoms/hdc-multiselect/hdc-multiselect.tsx"],"sourcesContent":[".hdc-multiselect {\n  min-width: 125px;\n  max-width: 100%;\n  font-family: sans-serif;\n  font-size: 1em;\n  box-sizing: border-box;\n  position: relative;\n\n  * {\n    box-sizing: border-box;\n  }\n\n  &-value {\n    display: block;\n    width: 100%;\n    padding: 0.3rem 0.5rem;\n    cursor: pointer;\n    text-align: left;\n    color: #8a92a6;\n    min-height: 29px;\n    overflow: hidden;\n    background-color: #fff;\n    -webkit-background-clip: padding-box;\n    background-clip: padding-box;\n    border: 1px solid #eee;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    -webkit-border-radius: 0.25rem;\n    border-radius: 0.25rem;\n    -webkit-box-shadow: 0 0 0 0;\n    box-shadow: 0 0 0 0;\n    -webkit-transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n    transition: border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n    -o-transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;\n\n    &[disabled], &:disabled {\n      background-color: #e9ecef;\n      cursor: auto;\n    }\n\n    & > span {\n      text-overflow: ellipsis;\n      display: block;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n  }\n\n  &-container {\n    width: 100%;\n    display: none;\n    position: absolute;\n    z-index: 10;\n    color: #333;\n    overflow: auto;\n    padding: 0px;\n    background: rgb(255, 255, 255);\n    border-width: 1px;\n    border-style: solid;\n    border-color: rgb(170, 170, 170);\n    border-image: initial;\n    border-radius: 4px;\n\n    &::-webkit-scrollbar {\n      width: 0.5em;\n    }\n\n    &::-webkit-scrollbar-track {\n      border-left: 1px solid #ccc;\n    }\n     \n    &::-webkit-scrollbar-thumb {\n      background-color: #c49227;\n    }\n\n    &.show {\n      display: block;\n    }\n\n    &--top {\n      .hdc-input-autocomplete-item {\n        border-top: 1px solid #ced4da;\n        border-bottom: unset;\n      }\n    }\n  }\n\n  &-search {\n    width: 100%;\n    padding: 4px;\n\n    &-input {\n      width: 100%;\n      min-height: 24px;\n      font-size: 0.8rem;\n      box-shadow: none;\n      height: auto !important;\n      padding: 0px 10px 0px 3px;\n      margin: 0px;\n      outline: 0px;\n      border: 1px solid rgb(170, 170, 170);\n      border-radius: 3px;\n    }\n  }\n\n  &-options {\n    overflow: auto;\n    margin: 0px;\n    padding: 5px 8px;\n    width: 100%;\n  }\n\n  &-item {\n    display: list-item;\n    background-image: none;\n    position: static;\n    list-style: none;\n\n    &-label {\n      display: flex;\n      align-items: center;\n    }\n\n    & span {\n      margin-left: 3px;\n      display: inline;\n      white-space: nowrap;\n    }\n\n    & > input {\n      pointer-events: none;\n    }\n  }\n}","import { Component, EventEmitter, Element, Prop, State, Event, h, Listen, Method } from '@stencil/core';\n\n@Component({\n  tag: 'hdc-multiselect',\n  styleUrl: 'hdc-multiselect.scss',\n})\nexport class HdcMultiselect {\n  /**\n   * Element of hdc multiselect\n   */\n  @Element() el: HTMLElement;\n  /**\n   * Prop value of hdc multiselect\n   */\n  @Prop({ mutable: true }) value: Array<string | object> | null;\n  /**\n   * Prop disable of hdc multiselect\n   */\n  @Prop({ mutable: true }) disable: boolean;\n  /**\n   * Prop lock of hdc multiselect\n   */\n  @Prop({ mutable: true }) lock: boolean;\n  /**\n   * Prop items of hdc multiselect\n   */\n  @Prop({ mutable: true }) items: Array<string | object> | undefined;\n  /**\n   * Prop view items of hdc multiselect\n   */\n  @Prop({ mutable: true }) viewItems: number = 8;\n  /**\n   * Prop key of hdc multiselect\n   */\n  @Prop({ mutable: true }) valueKey = 'name';\n  /**\n   * Prop string of hdc multiselect\n   */\n  @Prop() valueLabel = 'name';\n  /**\n   * State filtered items of hdc multiselect\n   */\n  @State() filteredItems: Array<string | object> = [];\n  /**\n   * State search text of hdc multiselect\n   */\n  @State() searchText = '';\n  /**\n   * State search text of hdc multiselect\n   */\n  @State() valueOptions: Array<string | object> | null;\n  /**\n   * State search text of hdc multiselect\n   */\n  @State() showDrop: boolean = false;\n  /**\n   * State search text of hdc multiselect\n   */\n  @State() isSelectAll: boolean = false;\n  /**\n   * Event change value of hdc multiselect\n   */\n  @Event() changeValue: EventEmitter<string | object | null>;\n  /**\n     * Max height of hdc multiselect\n     */\n  maxHeight = 20;\n\n  /**\n   * Determines whether change value filter options on\n   * @param event CustomEvent\n   */\n  componentWillUpdate(){\n    if(!this.value) {\n      this.valueOptions = null;\n      this.value = null;\n    }\n  }\n  onChangeValueFilterOptions(event: string) {\n    this.searchText = event;\n    this.filteredItems =\n      this.items?.filter((option) => {\n        const label =\n          this.valueLabel && typeof option === 'object' ? option[this.valueLabel] : option;\n\n        return label.toLowerCase().includes(this.searchText.toLowerCase());\n      }) ?? [];\n      requestAnimationFrame(() => {\n        const list = this.el.querySelectorAll('input[data-name=\"selectItems\"]');\n        if (list) {\n          list.forEach(item => {\n            const checkbox = item as HTMLInputElement;\n            let flag = this.valueOptions?.map(item => String(item[this.valueKey])).includes(String(checkbox.value));\n            if (flag) {\n              checkbox.checked = true;\n            } else {\n              checkbox.checked = false;\n            }\n          });\n        }        // Do something with liElements\n      });\n  }\n\n  /**\n   * Determines whether click select option on\n   * @param option string\n   */\n  onClickSelectOption(option: string | object) {\n    //Verificamos si ya existen valores seleccionados\n    if (this.valueOptions) {\n      const indexOf = this.valueOptions.findIndex(item => String(item[this.valueKey]) === String(option[this.valueKey]));\n      if (indexOf === -1) {\n        this.valueOptions.push(option);\n      } else {\n        this.valueOptions.splice(indexOf, 1);\n      }\n      if (this.valueOptions.length === 0) {\n        this.valueOptions = null;\n      }\n    } else {\n      this.valueOptions = [option];\n    }\n\n    //Desactivamos el check selectAll \n    const list = this.el.querySelectorAll('input[data-name=\"selectAll\"]');\n    if(list){\n      this.isSelectAll = this.valueOptions?.length === this.items?.length;\n      list.forEach((item: HTMLInputElement) => {\n        item.checked = this.isSelectAll;\n      });\n    }\n    \n    this.value = this.valueOptions?.map(item => item[this.valueKey]) || null;\n    this.changeValue.emit(this.value);\n  }\n\n  @Listen('click', { target: 'window' })\n  handleOnClick(ev) {\n    if (this.showDrop) {\n      if (this.el.contains(ev.target)) {\n        // If click was inside, stop here\n        return;\n      }\n      this.showDrop = false;\n    }\n  }\n\n  render() {\n    return (\n      <div class=\"hdc-multiselect\">\n        <button\n          class=\"hdc-multiselect-value\"\n          disabled={this.disable || this.lock}\n          onClick={() => this.toggleDrop()}>\n          <span>{this.getValueText()}</span>\n        </button>\n        <div\n          class={this.getClassInputAutocompleteContainer()}\n        >\n          <div class=\"hdc-multiselect-search\">\n            <input\n              class=\"hdc-multiselect-search-input\"\n              onInput={ev => this.onInputText(ev)}\n            />\n          </div>\n          <ul class={this.getClassInputAutocomplete()} style={{ maxHeight: this.getMaxHeight() }}>\n            <li class=\"hdc-multiselect-item\">\n              <label class=\"hdc-multiselect-item-label\">\n                <input \n                  type=\"checkbox\" \n                  data-name=\"selectAll\" \n                  onClick={() => this.selectAllOptions()} \n                />\n                <span>{'[Seleccionar Todo]'}</span>\n              </label>\n            </li>\n            {this.filteredItems.map((option, index) => (\n              <li\n                key={index}\n                class=\"hdc-multiselect-item\"\n              >\n                <label class=\"hdc-multiselect-item-label\">\n                  <input \n                    type=\"checkbox\" \n                    data-name=\"selectItems\" \n                    value={option[this.valueKey]} \n                    onClick={() => this.onClickSelectOption(option)} \n                  />\n                  <span>{typeof option === 'object' ? option[this.valueLabel] : option}</span>\n                </label>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n\n  toggleDrop() {\n    if (!this.showDrop) {\n      this.onChangeValueFilterOptions('');\n    }\n    this.showDrop = !this.showDrop;\n  }\n\n  selectAllOptions() {\n    const list = this.el.querySelectorAll('input[data-name=\"selectItems\"]');\n    if (list) {\n      list.forEach(item => {\n        const checkbox = item as HTMLInputElement;\n        if (!this.isSelectAll) {\n          checkbox.checked = true;\n        } else {\n          checkbox.checked = false;\n        }\n      });\n      if (!this.isSelectAll) {\n        this.valueOptions = this.items ? [...this.items] : null;\n      } else {\n        this.valueOptions = null;\n      }\n      this.value = this.valueOptions?.map(item => item[this.valueKey]) || null;\n      this.changeValue.emit(this.value);\n    }\n    this.isSelectAll = !this.isSelectAll;\n  }\n\n  /**\n   * Determines whether input text on\n   * @param input Event\n   */\n  @Method()\n  async onInputText(input: InputEvent) {\n    const element = input.target as HTMLInputElement;\n\n    this.onChangeValueFilterOptions(element.value);\n\n   \n  }\n\n  /**\n   * Gets value text\n   * @returns string\n   */\n  getValueText() {\n    if(this.value) {\n      if(this.isSelectAll) {\n        return 'Todos';\n      } else if(this.value.length > 4) {\n        return `${this.valueOptions?.length} de ${this.items?.length} seleccionados`;\n      }\n\n      return this.valueOptions?.map(item => item[this.valueLabel]).join(', ') || '';\n    }\n    /*\n        this.valueOptions = null;\n    this.value = null;\n    \n    */\n\n    return '-- Seleccione --';\n  }\n\n  /**\n   * Gets max height\n   * @returns { [key: string]: boolean }\n   */\n  getMaxHeight() {\n    return this.viewItems > 0 ? `${(this.maxHeight * this.viewItems) + 40}px` : '';\n  }\n\n  /**\n   * Gets class multiselect container\n   * @returns { [key: string]: boolean }\n   */\n  getClassInputAutocompleteContainer() {\n    return {\n      'hdc-multiselect-container': true,\n      'hdc-multiselect-container--top': true,\n      'show': this.showDrop,\n    };\n  }\n\n  /**\n   * Gets class multiselect\n   * @returns { [key: string]: boolean }\n   */\n  getClassInputAutocomplete() {\n    return {\n      'hdc-multiselect-options': true,\n    };\n  }\n\n}\n"],"mappings":"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"}